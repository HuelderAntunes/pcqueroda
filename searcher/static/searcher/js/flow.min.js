function getResults(){$(".results .rs-card-list").empty(),$(".results .rs-card.big").empty(),$(".results .rs-card-list").hide(),$(".results .rs-card.big").hide(),$(".results .error").hide(),$(".results h4").hide(),$(".results .loading").show(),$.ajax({url:"/results?sw="+Object.values(state.softwares).join("&sw=")+"&category="+state.type,success:function(e){if($(".results .loading").hide(),$(".results .error").hide(),0==e.success.computer_list.length)$(".results .error").fadeIn();else{$(".results .rs-card-list").fadeIn(),$(".results .rs-card.big").fadeIn(),e.success.computer_list.length>1&&$(".results h4").fadeIn(1e3);var t=e.success.computer_list[0];$(".results .rs-card.big").append(` <img\n      src="${t.fields.image.includes("https")?t.fields.image:"https://storage.googleapis.com/pcqueroda-images/"+t.fields.image}"\n      alt="${t.fields.title}"\n    />\n    <div class="description">\n      <h3>R$ ${t.fields.price.toLocaleString("pt-br")}</h3>\n      <p>\n        ${t.fields.title}\n      </p>\n      <a href="${t.fields.affiliate_link}" target="_blank">VER MAIS</a>\n    </div>`).hide().fadeIn(),e.success.computer_list.slice(1).map(function(e){$(".results .rs-card-list").append(`<li class="rs-card small">\n        <img\n          src="${e.fields.image.includes("https")?e.fields.image:"https://storage.googleapis.com/pcqueroda-images/"+e.fields.image}"\n          alt="${e.fields.title}"\n        />\n        <div class="description">\n          <h3>R$ ${e.fields.price.toLocaleString("pt-br")}</h3>\n          <p>\n            ${e.fields.title}\n          </p>\n          <a href="${e.fields.affiliate_link}" target="_blank">VER MAIS</a>\n        </div>\n      </li>`).hide().fadeIn()})}}})}function showStep(e){state.type.length>0||Object.keys(state.softwares).length>0?$(".search-next button.disabled").removeClass("disabled"):$(".search-next button").addClass("disabled"),$(".steps-wrapper .step .step-item[data-step]").length-1!==state.activeStep?$(".search-next button").show():($(".search-next button").hide(),getResults()),0===state.activeStep?$(".search-next .back-link").hide():$(".search-next .back-link").show(),$(".steps-wrapper .step .step-item.active").removeClass("active"),$(".steps-wrapper .step .step-item[data-step='"+e+"']").addClass("active"),$(".game-searcher div[data-step").hide(),$(".game-searcher div[data-step='"+e+"']").fadeIn()}function addStepButtonListeners(){$(".game-searcher .search-next button").click(e=>{showStep(++state.activeStep),$("html, body").animate({scrollTop:$("#searcher-app").offset().top},500)}),$(".game-searcher .search-next .back-link").click(e=>{showStep(--state.activeStep),$("html, body").animate({scrollTop:$("#searcher-app").offset().top},500)})}function getStatusText(){return Object.keys(state.softwares).length?`Você selecionou: <span>${Object.keys(state.softwares).map(e=>`<span class="delete" data-id="${state.softwares[e]}">${e}</span>`).join(", ").replace(/,\s([^,]+)$/," e $1")}</span>`:"Selecione no mínimo um jogo ou software para continuar."}function addSoftwareListeners(){Object.keys(state.softwares).forEach(e=>{$(".software-list ul li[data-id='"+state.softwares[e]+"']").addClass("active")}),$(".software-list h6").html(getStatusText());var e=function(t){var s=$(t.target).text(),a=$(`.software-list ul li[data-id="${state.softwares[s]}"]`);a.removeClass("active"),delete state.softwares[s],$(".software-list h6").html(getStatusText()),$(".software-list h6 .delete").click(e)};$(".software-list h6").html(getStatusText()),$(".software-list h6 .delete").click(e),$(".software-list ul li").click(t=>{var s=$(t.target).closest("li");s.hasClass("active")?(s.removeClass("active"),delete state.softwares[s.data("name")]):(s.addClass("active"),state.softwares[s.data("name")]=s.data("id")),Object.keys(state.softwares).length>0?$(".search-next button.disabled").removeClass("disabled"):$(".search-next button").addClass("disabled"),$(".software-list h6").html(getStatusText()),$(".software-list h6 .delete").click(e)})}var state={activeStep:$(".steps-wrapper .step .active").data("step"),softwares:{},type:""};$(".type-selector ul li").click(e=>{$(".type-selector ul li").removeClass("active"),$(e.target).addClass("active"),state.type=$(e.target).data("type"),state.type.length>0?$(".search-next button.disabled").removeClass("disabled"):$(".search-next button").addClass("disabled")}),addStepButtonListeners(),addSoftwareListeners(),showStep(state.activeStep),$(".software-list h6").html(getStatusText());